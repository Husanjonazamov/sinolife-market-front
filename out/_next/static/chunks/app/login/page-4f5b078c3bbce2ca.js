(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{6768:(e,s,r)=>{Promise.resolve().then(r.bind(r,8007))},8007:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(5155),a=r(2115),o=r(6874),n=r.n(o),l=r(7288),i=r(9010),d=r(3464),c=r(8070),p=r(5695),h=r(5970),m=r(7927);function u(){let e=(0,p.useRouter)(),{t:s}=(0,m.o)(),[r,o]=(0,a.useState)({phone:"",password:""}),[u,x]=(0,a.useState)({}),[g,b]=(0,a.useState)(null),[f,w]=(0,a.useState)(!1),_=()=>{let e={};return 12!==r.phone.replace(/[^0-9]/g,"").length&&(e.phone="Telefon raqam to‘liq bo‘lishi kerak: +998 XX XXX XX XX"),r.password?r.password.length<8&&(e.password="Parol kamida 8 ta belgidan iborat bo‘lishi kerak"):e.password="Parol kiritish shart",x(e),0===Object.keys(e).length},j=async s=>{if(s.preventDefault(),b(null),_()){w(!0);try{let s=r.phone.replace(/[^0-9]/g,""),{access:t,refresh:a,first_name:o}=(await d.A.post("".concat(c.A,"/auth/token/"),{phone:Number(s),password:r.password})).data;localStorage.setItem("access",t),localStorage.setItem("refresh",a),o&&localStorage.setItem("first_name",o),e.push("/")}catch(e){e.response&&401===e.response.status?b("Telefon raqami yoki parol noto‘g‘ri"):b("Kirishda xatolik. Qaytadan urinib ko‘ring.")}finally{w(!1)}}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(l.A,{}),(0,t.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("welcome_back")}),(0,t.jsx)("p",{className:"text-gray-600",children:s("sign_in_to_account")})]}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[g&&(0,t.jsx)("div",{className:"bg-red-100 text-red-700 p-3 rounded-lg text-sm text-center",children:g}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:s("phone_number")}),(0,t.jsx)(h._g,{mask:"+998 00 000 00 00",definitions:{0:/[0-9]/},lazy:!1,overwrite:!0,id:"phone",name:"phone",value:r.phone,onAccept:e=>{o(s=>({...s,phone:e})),u.phone&&x(e=>({...e,phone:""}))},placeholder:"+998 __ ___ __ __",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm ".concat(u.phone?"border-red-500":"border-gray-300")}),u.phone&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:s("password")}),(0,t.jsx)("input",{type:"password",id:"password",name:"password",value:r.password,onChange:e=>{let{name:s,value:r}=e.target;o(e=>({...e,[s]:r})),u[s]&&x(e=>({...e,[s]:""}))},className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm ".concat(u.password?"border-red-500":"border-gray-300"),placeholder:s("password")}),u.password&&(0,t.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.password})]}),(0,t.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Signing In...":s("sign_in")})]}),(0,t.jsx)("div",{className:"mt-8 text-center",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[s("no_account")," ",(0,t.jsx)(n(),{href:"/register",className:"text-green-600 hover:text-green-700 font-medium cursor-pointer",children:s("sign_up_here")})]})})]})}),(0,t.jsx)(i.A,{})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[115,970,425,441,684,358],()=>s(6768)),_N_E=e.O()}]);