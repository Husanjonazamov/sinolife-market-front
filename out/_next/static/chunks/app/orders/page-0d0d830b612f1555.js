(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{995:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var s=a(5155),r=a(2115),l=a(6874),c=a.n(l),i=a(7288),n=a(9010),d=a(8070),o=a(3464),m=a(2939),x=a(7927);function h(){let{t:e}=(0,x.o)(),[t,a]=(0,r.useState)([]),[l,h]=(0,r.useState)(!0),[g,u]=(0,r.useState)("all"),p=e=>e.toLocaleString("ru-RU")+" so'm",y=async()=>{var e,t,s;h(!0);let r=localStorage.getItem("access"),l="".concat(d.A,"/api/order/me/");try{let t=await o.A.get(l,{headers:{Authorization:"Bearer ".concat(r)}});a((null==(e=t.data)?void 0:e.data)||[])}catch(e){(null==(t=e.response)?void 0:t.status)===401?(r=await (0,m.B)())&&a((null==(s=(await o.A.get(l,{headers:{Authorization:"Bearer ".concat(r)}})).data)?void 0:s.data)||[]):console.error("Buyurtmalarni olishda xatolik:",e)}finally{h(!1)}};(0,r.useEffect)(()=>{y()},[]);let b="all"===g?[...t].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()):t.filter(e=>e.status===g).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),j=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"accepted":return"bg-blue-100 text-blue-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{switch(e){case"pending":return"ri-time-line";case"accepted":return"ri-checkbox-circle-line";case"rejected":return"ri-close-circle-line";case"completed":return"ri-check-line";default:return"ri-information-line"}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)(i.A,{}),(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:e("my_orders_title")}),(0,s.jsx)("p",{className:"text-gray-600",children:e("my_orders_subtitle")})]}),(0,s.jsx)("div",{className:"mb-6",children:(0,s.jsx)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-lg w-fit",children:[{key:"all",label:e("filter_all")},{key:"pending",label:e("filter_pending")},{key:"accepted",label:e("filter_accepted")},{key:"rejected",label:e("filter_rejected")}].map(e=>(0,s.jsx)("button",{onClick:()=>u(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ".concat(g===e.key?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:e.label},e.key))})}),l?(0,s.jsx)("div",{className:"text-center py-16 text-gray-600",children:"Yuklanmoqda..."}):0===b.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("i",{className:"ri-shopping-bag-line text-6xl text-gray-300 mb-4"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:e("no_orders")}),(0,s.jsx)("p",{className:"text-gray-500 mb-8",children:e("start_shopping")}),(0,s.jsxs)(c(),{href:"/products",className:"inline-flex items-center px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors cursor-pointer whitespace-nowrap",children:[(0,s.jsx)("i",{className:"ri-shopping-bag-line mr-2"}),e("shop_now")]})]}):(0,s.jsx)("div",{className:"space-y-6",children:b.map(t=>(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("div",{className:"flex items-center space-x-4",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[e("checkout_title")," #",t.id]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e("order_date_label"),": ",new Date(t.created_at).toLocaleDateString()]})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ".concat(j(t.status)),children:[(0,s.jsx)("i",{className:"".concat(f(t.status)," mr-1")}),t.status.charAt(0).toUpperCase()+t.status.slice(1)]}),(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:p(parseFloat(t.total))})]})]}),(0,s.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,s.jsx)("div",{className:"space-y-3",children:t.order_items.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("img",{src:e.product.image,alt:e.product.title,className:"w-16 h-16 object-cover rounded-lg"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900",children:e.product.title}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Quantity: ",e.quantity]})]}),(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:p(e.product.price*e.quantity)})]},e.id))})})]},t.id))})]}),(0,s.jsx)(n.A,{})]})}},2939:(e,t,a)=>{"use strict";a.d(t,{B:()=>l});var s=a(3464),r=a(8070);let l=async()=>{let e=localStorage.getItem("refresh");try{let t=await s.A.post("".concat(r.A,"/auth/token/refresh/"),{refresh:e});return localStorage.setItem("access",t.data.access),t.data.access}catch(e){return localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login",null}}},7294:(e,t,a)=>{Promise.resolve().then(a.bind(a,995))}},e=>{var t=t=>e(e.s=t);e.O(0,[115,425,441,684,358],()=>t(7294)),_N_E=e.O()}]);