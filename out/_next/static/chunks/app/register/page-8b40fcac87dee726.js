(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{1851:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(2115),n=t(6874),o=t.n(n),l=t(7288),i=t(9010),d=t(5970),c=t(3464),m=t(8070),p=t(5695),h=t(7927);function u(){let e=(0,p.useRouter)(),{t:s}=(0,h.o)(),[t,n]=(0,a.useState)({firstName:"",phone:"+998 ",password:""}),[u,x]=(0,a.useState)({}),[f,g]=(0,a.useState)(!1),b=e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t})),u[s]&&x(e=>({...e,[s]:""}))},N=()=>{let e={};t.firstName.trim()||(e.firstName="First name is required");let s=t.phone.replace(/[^0-9]/g,"");return s.startsWith("998")?12!==s.length&&(e.phone="Phone number must be in format +998 XX XXX XX XX"):e.phone="Phone number must start with +998",t.password?t.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",x(e),0===Object.keys(e).length},w=async s=>{if(s.preventDefault(),!N())return;g(!0);let r=t.phone.replace(/[^0-9]/g,"");try{await c.A.post("".concat(m.A,"/auth/register/"),{first_name:t.firstName,phone:Number(r),password:t.password});let{access:s,refresh:a,first_name:n}=(await c.A.post("".concat(m.A,"/auth/token/"),{phone:Number(r),password:t.password})).data;localStorage.setItem("access",s),localStorage.setItem("refresh",a),localStorage.setItem("first_name",n||t.firstName),e.push("/")}catch(e){if(e.response&&e.response.data){let s=e.response.data;x(e=>({...e,server:s.detail||s.message||"Registration or login failed"}))}else x(e=>({...e,server:"Network error"}))}finally{g(!1)}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(l.A,{}),(0,r.jsx)("div",{className:"container mx-auto px-4 py-12",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-md p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:s("create_account")}),(0,r.jsx)("p",{className:"text-gray-600",children:s("join_herbastore")})]}),(0,r.jsxs)("form",{onSubmit:w,className:"space-y-6",children:[u.server&&(0,r.jsx)("p",{className:"text-red-500 text-center text-sm",children:u.server}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700 mb-1",children:s("first_name")}),(0,r.jsx)("input",{type:"text",id:"firstName",name:"firstName",value:t.firstName,onChange:b,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm ".concat(u.firstName?"border-red-500":"border-gray-300"),placeholder:s("enter_first_name")}),u.firstName&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.firstName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:s("phone_number")}),(0,r.jsx)(d._g,{mask:"+998 00 000 00 00",definitions:{0:/[0-9]/},lazy:!1,overwrite:!0,id:"phone",name:"phone",value:t.phone,onAccept:e=>{e.startsWith("+998")?n(s=>({...s,phone:e})):n(e=>({...e,phone:"+998 "})),u.phone&&x(e=>({...e,phone:""}))},placeholder:"+998 __ ___ __ __",className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm ".concat(u.phone?"border-red-500":"border-gray-300")}),u.phone&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.phone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:s("password")}),(0,r.jsx)("input",{type:"password",id:"password",name:"password",value:t.password,onChange:b,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm ".concat(u.password?"border-red-500":"border-gray-300"),placeholder:s("password")}),u.password&&(0,r.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.password})]}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Creating Account...":s("create_account_button")})]}),(0,r.jsx)("div",{className:"mt-8 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[s("already_have_account")," ",(0,r.jsx)(o(),{href:"/login",className:"text-green-600 hover:text-green-700 font-medium",children:s("sign_in_here")})]})})]})}),(0,r.jsx)(i.A,{})]})}},9970:(e,s,t)=>{Promise.resolve().then(t.bind(t,1851))}},e=>{var s=s=>e(e.s=s);e.O(0,[115,970,425,441,684,358],()=>s(9970)),_N_E=e.O()}]);