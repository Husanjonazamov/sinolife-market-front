"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[839],{2939:(e,t,r)=>{r.d(t,{B:()=>l});var a=r(3464),s=r(8070);let l=async()=>{let e=localStorage.getItem("refresh");try{let t=await a.A.post("".concat(s.A,"/auth/token/refresh/"),{refresh:e});return localStorage.setItem("access",t.data.access),t.data.access}catch(e){return localStorage.removeItem("access"),localStorage.removeItem("refresh"),window.location.href="/login",null}}},4436:(e,t,r)=>{r.d(t,{k5:()=>d});var a=r(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(s),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var a,s,l;a=e,s=t,l=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>a.createElement(u,o({attr:n({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,n({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:s,size:l,title:c}=e,d=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,i),u=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,d,{className:r,style:n(n({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&a.createElement("title",null,c),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(s)}},7782:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(5155),s=r(2115),l=r(7288),i=r(9010),o=r(3464),c=r(9911),n=r(5799);r(5716);var d=r(2939),u=r(8070),m=r(7927);function x(e){let{filters:t}=e,[r,l]=(0,s.useState)([]),[i,x]=(0,s.useState)(1),[g,p]=(0,s.useState)(!0),{t:h}=(0,m.o)();(0,s.useEffect)(()=>{!async function(){p(!0);try{let e="".concat(u.A,"/api/product/"),r={};t.category_ids.length>0&&(r.category_ids=t.category_ids.join(",")),t.min_price>0&&(r.min_price=t.min_price),t.max_price>0&&(r.max_price=t.max_price),t.q&&(r.q=t.q);let a=await o.A.get(e,{params:r});a.data.status&&l(a.data.data.results)}catch(e){console.error("Mahsulotlarni olishda xatolik:",e),n.oR.error("Mahsulotlarni olishda xatolik")}finally{p(!1)}}()},[t]);let f=Math.ceil(r.length/10),y=(i-1)*10,b=r.slice(y,y+10),j=async e=>{try{let a,s="".concat(u.A,"/api/cart/"),l=localStorage.getItem("access"),i={cart_items:[{product:e,quantity:1}]};try{a=await o.A.post(s,i,{headers:{Authorization:"Bearer ".concat(l),"Content-Type":"application/json"}})}catch(e){if(e.response&&401===e.response.status){let e=await (0,d.B)();if(!e)return void n.oR.error("Sessiya tugadi. Iltimos, qaytadan tizimga kiring.");a=await o.A.post(s,i,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}})}else{var t,r;console.error("Savatchaga qo‘shishda xatolik:",e),n.oR.error((null==(r=e.response)||null==(t=r.data)?void 0:t.detail)||"Serverda xatolik");return}}a.data.status?n.oR.success("✅ Mahsulot savatchaga qo‘shildi"):n.oR.error("❌ Mahsulot qo‘shishda xatolik")}catch(e){console.error("Savatchaga qo‘shishda xatolik:",e),n.oR.error("Serverda xatolik")}};return g?(0,a.jsx)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-500 px-4 sm:px-6 md:px-12 lg:px-24 lg:pl-96",children:(0,a.jsx)("h2",{className:"text-xl font-semibold mb-1",children:"Yuklanmoqda..."})}):0===r.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[300px] text-gray-500 px-4 sm:px-6 md:px-12 lg:px-24 lg:pl-96",children:[(0,a.jsx)(c.WOs,{className:"text-7xl text-gray-400 mb-4 animate-bounce"}),(0,a.jsx)("h2",{className:"text-xl font-semibold mb-1",children:"Mahsulot topilmadi"}),(0,a.jsx)("p",{className:"text-center text-sm text-gray-400 max-w-md",children:"Qidiruv filterlarini tekshirib ko‘ring yoki boshqa kategoriya tanlang."})]}):(0,a.jsxs)("div",{className:"flex-1 px-4",children:[(0,a.jsx)(n.N9,{position:"top-right",autoClose:2e3}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-8",children:(0,a.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:[h("all_products")," (",r.length,")"]})}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:b.map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2 overflow-hidden",children:[(0,a.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-64 object-cover object-top"}),(0,a.jsxs)("div",{className:"p-6",children:[e.category&&(0,a.jsx)("div",{className:"text-sm text-green-600 mb-2",children:e.category.title}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:e.title}),(0,a.jsx)("div",{className:"flex items-center mb-3",children:(0,a.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["Mahsulot soni: (",e.quantity,")"]})}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-green-600",children:e.discounted_price?"".concat(e.discounted_price.toLocaleString("uz-UZ")," so'm"):"".concat(e.price.toLocaleString("uz-UZ")," so'm")}),e.discounted_price&&e.price!==e.discounted_price&&(0,a.jsxs)("span",{className:"text-sm text-gray-500 line-through",children:[e.price.toLocaleString("uz-UZ")," so'm"]})]})}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold transition-colors whitespace-nowrap cursor-pointer",children:h("add_to_cart")})]})]},e.id))}),(0,a.jsxs)("div",{className:"flex justify-center items-center mt-12 space-x-2",children:[(0,a.jsx)("button",{onClick:()=>x(Math.max(1,i-1)),disabled:1===i,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:(0,a.jsx)("i",{className:"ri-arrow-left-line"})}),[...Array(f)].map((e,t)=>(0,a.jsx)("button",{onClick:()=>x(t+1),className:"px-4 py-2 rounded-lg cursor-pointer ".concat(i===t+1?"bg-green-600 text-white":"border border-gray-300 hover:bg-gray-50"),children:t+1},t+1)),(0,a.jsx)("button",{onClick:()=>x(Math.min(f,i+1)),disabled:i===f,className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",children:(0,a.jsx)("i",{className:"ri-arrow-right-line"})})]})]})}var g=r(5695);function p(e){let{onFilterChange:t}=e,r=(0,g.useSearchParams)(),{t:l}=(0,m.o)(),[i,c]=(0,s.useState)([]),[n,d]=(0,s.useState)([]),[x,p]=(0,s.useState)(""),[h,f]=(0,s.useState)(""),[y,b]=(0,s.useState)("");(0,s.useEffect)(()=>{!async function(){try{let e=await o.A.get("".concat(u.A,"/api/category/"));e.data.status&&d(e.data.data.results)}catch(e){console.error("Kategoriya olishda xatolik:",e)}}()},[]),(0,s.useEffect)(()=>{let e=r.get("category_ids");e&&c(e.split(",").map(e=>parseInt(e)).filter(Boolean))},[r]),(0,s.useEffect)(()=>{t({category_ids:i,min_price:parseInt(x)||0,max_price:parseInt(h)||0,q:y})},[i,x,h,y]);let j=e=>{c(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,a.jsxs)("div",{className:"w-full lg:w-80 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:l("product_search")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{type:"text",placeholder:l("product_search"),value:y,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 text-sm"}),(0,a.jsx)("i",{className:"ri-search-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:l("category")}),(0,a.jsxs)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:[0===n.length&&(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"Kategoriyalar yuklanmoqda..."}),n.map(e=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",id:"category-".concat(e.id),checked:i.includes(e.id),onChange:()=>j(e.id),className:"w-4 h-4 text-green-600 bg-gray-100 border-gray-300 rounded focus:ring-green-500"}),(0,a.jsx)("label",{htmlFor:"category-".concat(e.id),className:"ml-3 text-sm text-gray-700 cursor-pointer flex-1",children:e.title})]},e.id))]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:l("price_range")}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,a.jsx)("input",{type:"number",placeholder:"Min",value:x,onChange:e=>p(e.target.value.replace(/^0+/,"")),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,a.jsx)("span",{className:"text-gray-500",children:l("price_from")}),(0,a.jsx)("input",{type:"number",placeholder:"Max",value:h,onChange:e=>f(e.target.value.replace(/^0+/,"")),className:"w-20 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]})]}),(0,a.jsx)("button",{onClick:()=>{c([]),p(""),f(""),b("")},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 rounded-lg font-medium transition-colors cursor-pointer",children:l("clear_all_filters")})]})}let h="bannerDataProducts",f={title:"Our Products",subtitle:"Premium Herbal Supplements",desc:"Discover our complete collection of premium herbal supplements and natural wellness products",image:"https://readdy.ai/api/search-image?query=Premium%20herbal%20supplements&width=1920&height=600"};function y(){let[e,t]=(0,s.useState)({category_ids:[],min_price:0,max_price:0,q:""}),[r,c]=(0,s.useState)(f);return(0,s.useEffect)(()=>{let e=localStorage.getItem(h);if(e)try{let{data:t,timestamp:r}=JSON.parse(e);if(Date.now()-r<36e5)return void c(t)}catch(e){}!async function(){try{let e=await o.A.get("".concat(u.A,"/api/banner/"));if(e.data.status&&e.data.data.results.length>0){let t=e.data.data.results.find(e=>"products"===e.type);if(t){let e={title:t.title,subtitle:t.subtitle,desc:t.description||"",image:t.image};c(e),localStorage.setItem(h,JSON.stringify({data:e,timestamp:Date.now()}));return}}c(f)}catch(e){console.error("Banner fetch error:",e),c(f)}}()},[]),(0,a.jsxs)("div",{className:"min-h-screen",children:[(0,a.jsx)(l.A,{}),(0,a.jsxs)("main",{children:[(0,a.jsxs)("section",{className:"relative py-24 bg-cover bg-center",style:{backgroundImage:"url(".concat(r.image,")")},children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/50"}),(0,a.jsxs)("div",{className:"relative z-10 container mx-auto px-4 text-center text-white",children:[(0,a.jsx)("h1",{className:"text-5xl font-bold mb-4",children:r.title}),(0,a.jsx)("h2",{className:"text-2xl text-green-400 mb-4",children:r.subtitle}),(0,a.jsx)("p",{className:"text-xl max-w-2xl mx-auto",children:r.desc})]})]}),(0,a.jsx)("section",{className:"py-16",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,a.jsx)(p,{onFilterChange:t}),(0,a.jsx)(x,{filters:e})]})})})]}),(0,a.jsx)(i.A,{})]})}}}]);